<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.talkweb.ei.outmanager.dao.OrgMapper">
  <resultMap id="BaseResultMap" type="com.talkweb.ei.outmanager.model.TreeNode">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue May 02 13:19:15 CST 2017.
    -->
    <id column="ID" jdbcType="VARCHAR" property="id" />
    <result column="NAME" jdbcType="VARCHAR" property="name" />
    <result column="PID" jdbcType="VARCHAR" property="pId" />
    
  </resultMap>
  

  <!-- 最简单的key value 格式，用于页面展示 -->
  <resultMap id="KeyValueResultMap" type="com.talkweb.ei.outmanager.model.KeyValue">
    <id column="ID" jdbcType="VARCHAR" property="id" />
    <result column="NAME" jdbcType="VARCHAR" property="name" />
     
  </resultMap>

  
  
  <select id="selectOrg" resultMap="BaseResultMap"> 
  		select org_id as id, parent_id as pId, org_name as name from t_pub_org t where t.isshow=1    
  </select>
  
  
  
   <select id="getSubOrgByName" parameterType="java.lang.String" resultMap="BaseResultMap"> 
  		select org_id as id, parent_id as pId, org_name as name from t_pub_org
  		START WITH  org_name='${value}' CONNECT BY PRIOR org_id=PARENT_ID
   
   </select> 
  
    <select id="getSubOrgByID" parameterType="java.lang.String" resultMap="BaseResultMap"> 
  		select org_id as id, parent_id as pId, org_name as name from t_pub_org
  		START WITH  org_id='${value}' CONNECT BY PRIOR org_id=PARENT_ID   
   </select>  
  
  
  <select id="selectUser" resultMap="KeyValueResultMap" parameterType="java.lang.String"> 
  		select id,name from T_OUT_USER u where u.usertype=1 and  companyid= #{companyid,jdbcType=VARCHAR}
  </select>
  
  <select id="getOrgByName" parameterType="java.lang.String" resultMap="BaseResultMap"> 
  		select org_id as id, parent_id as pId, org_name as name from t_pub_org
  		where org_name='${value}' and isshow=1   
  </select>  
  
  
  
</mapper>